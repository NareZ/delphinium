<script type="text/javascript">
	var moduleData = {{ moduleData|raw}};
</script>

<div ng-app="myApp">
    <script>
        var myApp = angular.module('myApp',[]);
        myApp.controller('CountryCtrl', ['$scope','$http',
        function($scope, $http)
        {
            $scope.moduleData = moduleData;
            $scope.firstName = "john";
            $scope.lastName = "smith";
        }]);
    </script>
    
    <div ng-controller="CountryCtrl">
        {% verbatim %}
            <div id="nestable">
                <ol class="dd-list">
                    <li class="dd-item dd3-item li-parent" data-id="{{item.moduleId}}"
                        ng-repeat="item in moduleData">
                        <div class="dd-handle dd3-handle"></div>
                        <i class="icon-sort-down dive"></i>
                        <div class="dd3-content" id="content-{{item.moduleId}}">{{item.name}}</div>
                        
                        <!--Children-->
                        <ol class="dd-list">
                            <li class="dd-item dd3-item li-parent" data-id="{{item.moduleId}}"
                                ng-repeat="child in item.children">
                                <div class="dd-handle dd3-handle"></div>
                                <i class="icon-sort-down dive"></i>
                                <div class="dd3-content" id="content-{{child.moduleId}}">{{child.name}}</div>


                            </li>
                        </ol>
                        
                        
                    </li>
                </ol>
            </div>

        {% endverbatim %}
    
    </div>
</div>

<script>
    $("#nestable").nestable({});
</script>
